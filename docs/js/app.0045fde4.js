(function(){"use strict";var e={3021:function(e,t,n){var a=n(5130),l=n(6768);const o={class:"link"};function u(e,t){const n=(0,l.g2)("router-link"),a=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("nav",o,[(0,l.bF)(n,{to:{name:"BookAppointment"}},{default:(0,l.k6)(()=>[...t[0]||(t[0]=[(0,l.eW)("Randevu al - ",-1)])]),_:1}),(0,l.bF)(n,{to:{name:"MyAppointments"}},{default:(0,l.k6)(()=>[...t[1]||(t[1]=[(0,l.eW)("Randevularım",-1)])]),_:1})]),(0,l.bF)(a)])}var s=n(1241);const i={},r=(0,s.A)(i,[["render",u]]);var c=r,d=n(8728),p=n(4232);const v={class:"page"},m=["min"],f={key:0,class:"alert info"},b={key:1,class:"alert error"},k={key:2,class:"slot-grid"},g=["onClick"],y={key:3},h={key:4},C={key:5,class:"field"},E={key:6,class:"alert success"},R=["disabled"];function L(e,t,n,o,u,s){return(0,l.uX)(),(0,l.CE)("div",v,[t[8]||(t[8]=(0,l.Lk)("label",null,"Uygun Saatler",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date",min:o.today,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedDate=e),required:""},null,8,m),[[a.Jo,o.selectedDate]]),o.loading?((0,l.uX)(),(0,l.CE)("p",f,"Yükleniyor...")):(0,l.Q3)("",!0),o.errorMessage?((0,l.uX)(),(0,l.CE)("p",b,(0,p.v_)(o.errorMessage),1)):(0,l.Q3)("",!0),o.availableSlots&&o.availableSlots.length?((0,l.uX)(),(0,l.CE)("ul",k,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.availableSlots,e=>((0,l.uX)(),(0,l.CE)("li",{key:e},[(0,l.Lk)("button",{class:(0,p.C4)(["slot",{selected:o.selectedTime===e}]),onClick:t=>o.selectedTime=e},(0,p.v_)(e),11,g)]))),128))])):!o.selectedDate||o.loading||o.errorMessage?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("p",y,"Bu tarih için uygun saat bulunamadı.")),o.selectedTime?((0,l.uX)(),(0,l.CE)("p",h,"Seçilen saat: "+(0,p.v_)(o.selectedTime),1)):(0,l.Q3)("",!0),o.selectedTime?((0,l.uX)(),(0,l.CE)("div",C,[t[5]||(t[5]=(0,l.Lk)("label",null,"Ad Soyad: ",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>o.name=e),required:""},null,512),[[a.Jo,o.name]]),t[6]||(t[6]=(0,l.Lk)("label",null,"Email: ",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>o.email=e),required:""},null,512),[[a.Jo,o.email]]),t[7]||(t[7]=(0,l.Lk)("label",null,"Not: ",-1)),(0,l.bo)((0,l.Lk)("textarea",{name:"not","onUpdate:modelValue":t[3]||(t[3]=e=>o.note=e)},null,512),[[a.Jo,o.note]])])):(0,l.Q3)("",!0),o.successMessage?((0,l.uX)(),(0,l.CE)("p",E,(0,p.v_)(o.successMessage),1)):(0,l.Q3)("",!0),(0,l.Lk)("button",{class:"primary",onClick:t[4]||(t[4]=(...e)=>o.createAppointment&&o.createAppointment(...e)),disabled:!o.selectedTime||o.loading||!o.selectedDate||!o.name||!o.email}," Randevu Oluştur ",8,R)])}var X=n(144),A=n(4373);const S=A.A.create({baseURL:"https://appointments-backend-ae8k.onrender.com/api"});var K=S,_={setup(){let e=(0,X.KR)(""),t=(0,X.KR)(""),n=(0,X.KR)([]),a=(0,X.KR)(!1),o=(0,X.KR)(""),u=(0,X.KR)(""),s=(0,X.KR)(""),i=(0,X.KR)(""),r=(0,X.KR)("");const c=(new Date).toISOString().slice(0,10),d=()=>{o.value="",a.value=!0,n.value=[],console.log("API BASE:",K.defaults.baseURL),K.get("/appointments/slots",{params:{date:e.value}}).then(t=>{console.log("selectedDate:",e.value),console.log("slots:",t.data),n.value=t.data}).catch(e=>{console.log("slots error:",e.response?.status,e.response?.data)}).finally(()=>{a.value=!1})};(0,l.wB)(e,()=>{d()});const p=()=>{o.value="",r.value="",K.post("/appointments",{name:u.value,email:s.value,note:i.value,date:e.value,time:t.value}).then(()=>{r.value="Randevu oluşturuldu.",t.value="",i.value="",d()}).catch(e=>{409==e.response?.status?o.value="Bu saat dolu. Lütfen başka bir saat seçiniz.":o.value="Randevu oluşturulamadı.",d()})};return{selectedDate:e,availableSlots:n,loading:a,errorMessage:o,selectedTime:t,name:u,email:s,note:i,successMessage:r,createAppointment:p,today:c}}};const M=(0,s.A)(_,[["render",L]]);var O=M;const w=["disabled"],T={key:0,class:"list"},Q=["onClick"],j={key:1},x={key:2};function B(e,t,n,o,u,s){return(0,l.uX)(),(0,l.CE)("div",null,[t[3]||(t[3]=(0,l.Lk)("label",{class:"email-label"},"Email: ",-1)),(0,l.bo)((0,l.Lk)("input",{class:"email",type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.emailInput=e),required:""},null,512),[[a.Jo,o.emailInput]]),(0,l.Lk)("button",{class:"list-btn",onClick:t[1]||(t[1]=(...e)=>o.fetchAppointments&&o.fetchAppointments(...e)),disabled:!o.emailInput},"Listele",8,w),o.appointments.length?((0,l.uX)(),(0,l.CE)("div",T,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(o.appointments,e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id},[(0,l.Lk)("p",null,(0,p.v_)(e.date)+" - "+(0,p.v_)(e.time)+" ("+(0,p.v_)(e.status)+")",1),"booked"===e.status?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t=>o.handleCancel(e)},"İptal Et",8,Q)):(0,l.Q3)("",!0)]))),128))])):o.hasSearched&&!o.loading?((0,l.uX)(),(0,l.CE)("div",j,[...t[2]||(t[2]=[(0,l.Lk)("p",null,"Bu email için randevu bulunmamakta.",-1)])])):(0,l.Q3)("",!0),o.successMessage?((0,l.uX)(),(0,l.CE)("p",x,(0,p.v_)(o.successMessage),1)):(0,l.Q3)("",!0)])}var I={setup(){let e=(0,X.KR)(""),t=(0,X.KR)([]),n=(0,X.KR)(!1),a=(0,X.KR)(""),l=(0,X.KR)(!1);const o=()=>{l.value=!0,n.value=!0,t.value=[],K.get("/appointments",{params:{email:e.value}}).then(e=>{t.value=e.data,n.value=!1}).catch(e=>{n.value=!1,console.log(e)})},u=e=>{K.delete("/appointments/"+e.id).then(()=>{a.value="Randevunuz iptal edilmiştir.",o()}).catch(e=>console.log(e))};return{appointments:t,emailInput:e,loading:n,fetchAppointments:o,handleCancel:u,hasSearched:l,successMessage:a}}};const U=(0,s.A)(I,[["render",B]]);var D=U;const F=[{path:"/",name:"BookAppointment",component:O},{path:"/my-appointments",name:"MyAppointments",component:D}],J=(0,d.aE)({history:(0,d.Bt)(),routes:F});var P=J;(0,a.Ef)(c).use(P).mount("#app")}},t={};function n(a){var l=t[a];if(void 0!==l)return l.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,a,l,o){if(!a){var u=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],o=e[c][2];for(var s=!0,i=0;i<a.length;i++)(!1&o||u>=o)&&Object.keys(n.O).every(function(e){return n.O[e](a[i])})?a.splice(i--,1):(s=!1,o<u&&(u=o));if(s){e.splice(c--,1);var r=l();void 0!==r&&(t=r)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[a,l,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var l,o,u=a[0],s=a[1],i=a[2],r=0;if(u.some(function(t){return 0!==e[t]})){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(i)var c=i(n)}for(t&&t(a);r<u.length;r++)o=u[r],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},a=self["webpackChunkappointment_frontend"]=self["webpackChunkappointment_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[504],function(){return n(3021)});a=n.O(a)})();
//# sourceMappingURL=app.0045fde4.js.map